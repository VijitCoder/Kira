# DB. Спецификации

*Черновик документа*

Пока не сформировал представление о полноценной ORM, как я хочу ее видеть. На данный момент пришел к выводу, что удобно работать с DB-моделями через прослойку в виде особых DTO - ***spec-классов*** (про DTO см. отдельный документ).

*Spec*  - сокращение от *specification*. Название мое, мне неизвестны какие-либо шаблоны проектирования подходящие под задумку. Спецификации применяются в двух направлениях: для передачи значений в методы моделей и для описания данных, возвращаемых моделями.

Пример на вход в модель: поиск по сайту. Куча фильтров, валидация, возможно работа сервиса и только потом готовые значения фильтрации валятся в модель. И их может быть много для простого перечисления в параметрах функции. Поэтому заводим класс спецификации, заполняем только теми данными, которые ожидает модель и запрашиваем через нее базу.

Примеры на выход, я думаю, очевидны: любая прочитанная запись сейчас - просто поле объекта `\StdClass`. А спека может дать описательное понятие, о чем поле.

Мне нравится идея работать с DTO при записи в базу, потому что это отделяет модель БД от источника данных. Она получает ровно то, что должна знать - готовые данные для записи, причем в объекте. Это позволяет доставать из объекта предсказуемые значения с комментарием по каждому полю, если понадобится.
