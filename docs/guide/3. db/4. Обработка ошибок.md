# DB. Обработка ошибок

Ошибки запросов и подключения к БД пишутся в лог (см. док *"Логер"*). Если определено логирование в базу, тогда ошибки запросов пишутся в нее, ошибки подключения - в любом случае в файлы. Если в атрибутах подключения к БД запрещены исключения, тогда логирования не будет; про атрибуты подключения тут [PDO::ATTR_ERRMODE](http://php.net/manual/ru/pdo.setattribute.php).

При возникновении ошибок в клиентский код будет проброшено исключение `kira\exceptions\DbException`. Его параметр `$code` (второй параметр в конструкторе `\Throwable`) указывает на причину исключения:

```
// kira\exceptions\DbException
QUERY = 1
CONNECT = 2
LOGIC = 3
```

По большей части это сделано для движка, чтобы корректно лог писать. Значения констант могут измениться в дальнейшем.

Не логируются ошибки логики использования (`DbException::LOGIC`), т.к. предполагается неверное использование фунционала программистом, исключение возникнет на этапе разработки.

Инициатива движка логировать сбои БД важна, т.к. такие вещи трудно отслеживать в клиентском коде, а серьезность их достаточно высокая.
