<h3>Создание нового приложения</h3>

<p>Мастер создания приложения очень упрощен и не охватывает все многообразие возможных сайтов, СУБД и фантазию кодера. Мастер написан для легкого старта работы с движком, не более того.</p>

<div class="note blue">
    <p>При указании путей рекомендую использовать прямые слеши (" / ") независимо от вашей <abbr title="операционная система">ОС</abbr>. Движок поддерживает кроссплатформу и все равно преобразует пути к прямым слешам.</p>

    <p>Объявляемые тут каталоги не должны существовать на момент создания приложения. Это необходимо во избежание случайной перезаписи содержимого каталогов. После создания, к каталогам назначаются <strong>полные права доступа</strong>.</p>
</div>

<form method="POST" action="create">
    <div class="row">
        <h4>Необходимый минимум</h4>

        <label>Каталог приложения</label>
        <div class="grayed take-left"><?=ROOT_PATH?></div>
        <div class="input-wrapper"><input type="text" name="path[app]" id="app-path"></div>

        <label class="clear-float">Каталог шаблонов</label>
        <div class="grayed take-left"><?=ROOT_PATH?></div>
        <div class="input-wrapper"><input type="text" name="path[view]" id="view-path"></div>

        <label class="clear-float">Каталог временных файлов</label>
        <div class="grayed take-left"><?=ROOT_PATH?></div>
        <div class="input-wrapper"><input type="text" name="path[temp]" id="temp-path"></div>

        <label class="clear-float">Путь к основному файлу конфигурации приложения</label>
        <div class="grayed take-left"><?=ROOT_PATH?></div>
        <div class="input-wrapper"><input type="text" name="main_conf" id="main-conf"></div>

        <hr>

        <div class="take-left cell-6">
            Префикс пространства имен приложения (может отличаться от каталога приложения)
        </div>
        <div class="input-wrapper"><input type="text" name="ns_prefix" placeholder="например 'app'"></div>

         <hr class="clear-float">

            <div class="clear-float take-left">Email администратора</div>
            <div class="input-wrapper"><input type="text" name="email"></div>
    </div>

    <div class="note blue">
        <p>В конфигурации БД подразумевается СУБД <strong>MySQL</strong>. Для других серверов вам потребуется вручную исправить конфиги. И да, кодировки только две :) Установка иной кодировки - задача непростая.</p>

        <p>Указываемая вами база данных должна существовать на сервере, мастер ее создавать не будет. Это обусловлено тем, что обычно для такой операции требуются особые права, да и не каждая хостинг-компания такие права дает.</p>
    </div>

    <div class="row">
        <h4>Конфигурация БД</h4>

        <div class="take-left">Сервер[:порт]</div>
        <div class="input-wrapper"><input type="text" name="db[server]" id="db-server"></div>

        <div class="clear-float cell-6">
            <div class="take-left">Имя базы</div>
            <div class="input-wrapper"><input type="text" name="db[name]" id="db-name"></div>
        </div>

        <div class="cell-6 with-select">
            <span class="pl-5">Кодировка</span>
            <select name="db[charset]" id="db-charset">
                <option value="utf8">utf8</option>
                <option value="cp1251">cp1251</option>
            <select>
        </div>

        <div class="clear-float">DSN: <span id="dsn">none</span><hr></div>

        <div class="cell-6">
            <div class="take-left">Пользователь</div>
            <div class="input-wrapper"><input type="text" name="db[user]"></div>
        </div>

         <div class="cell-6">
            <div class="take-left pl-5">Пароль</div>
            <div class="input-wrapper"><input type="password" name="db[password]"></div>
        </div>
    </div>

    <div class="note blue">
        <p>Логер вообще можно не настраивать. По умолчанию он включен, пишет лог в файлы, складывает их в temp-каталог приложения.</p>

        <p><strong>Каталог для логов</strong> желательно задать даже при логировании в БД. В случае ошибок базы, лог пойдет в файлы.</p>

        <p><strong>Часовой пояс</strong>: сайт может работать в одном поясе, а логи можно писать в поясе хостера хотя бы для того, чтобы <nobr>в случае</nobr> сбоя вести диалог с тех.поддержкой про одно и тоже время.</p>
    </div>

    <div class="row">
        <h4>Конфигурация логера</h4>

        <div>
            <label><input type="checkbox" name="log[switch]" checked="checked">Включить логирование</label>
        </div>

        <div class="cell-3 with-select">
            Писать логи в
            <select name="log[store]" id="log-store">
                <option disabled selected value> ... </option>
                <option value="db">базу</option>
                <option value="files">файлы</option>
            <select>
        </div>

        <div class="cell-9">
            <div id="log-db-info" class="mt-5" style="display: none;"><!-- определяется в js --></div>
        </div>

        <div class="cell-12">
            <label class="clear-float take-left">Каталог для логов:</label>
            <div class="grayed take-left"><?=ROOT_PATH?></div>
            <div class="input-wrapper"><input type="text" name="log[path]" id="log-path"></div>
        </div>

        <div class="cell-12">
            <div class="take-left">Часовой пояс в логах</div>
            <div class="input-wrapper"><input type="text" name="log[timezone]" placeholder="пояс по версии PHP"></div>
        </div>
    </div>

    <div class="note blue">
        <p>Если ваш сайт будет переведен на несколько языков, здесь вы можете указать их коды. Будут созданы заготовки языковых пакетов:</p>

        <ul>
            <li>в каталоге приложения - подкаталог <span class="inline-code">i18n/</span>, в котором размещаются php-скрипты со "словарями". Один язык - один файл.</li>
            <li>в каталоге шаблонов - подкаталоги типа <span class="inline-code">i18n/&lt;lang&gt;/</span> для хранения статичных страниц сайта на разных языках.</li>
            <li>в каталоге с js-скриптами (который вы укажете ниже) - подкаталог <span class="inline-code">i18n/</span>, содержащий словари для перевода строк в javascript.</li>
        </ul>

        <p>При выборе кодов рекомендую использовать 2-xбуквенные обозначения языков стандарта <a href='https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes' target="_blank" title="Wikipedia. List of ISO 639-1 codes">ISO 639-1</a>.</p>
    </div>

    <div class="row">
        <h4>Языковая поддержка</h4>

        <div class="cell-3">
            <div class="take-left">Код основного языка</div>
            <div class="input-wrapper"><input type="text" value="ru" name="lang[main]"></div>
        </div>

         <div class="cell-9">
            <div class="take-left pl-5">Другие языки, через запятую</div>
            <div class="input-wrapper"><input type="password" name="lang[other]"></div>
        </div>

        <div class="cell-12">
            <label class="clear-float">Путь к js-скриптам приложения</label>
            <div class="grayed take-left"><?=ROOT_PATH?></div>
            <div class="input-wrapper"><input type="text" name="path[js]" id="js-path"></div>
        </div>
    </div>

    <input type="submit" value="СОЗДАТЬ">
</form>

<script src='/install/static/script.js'></script>
